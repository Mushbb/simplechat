body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

.topbar { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background-color: #fff; border-bottom: 1px solid #ddd; }
.topbar-logo { color: #333; text-decoration: none; }
.topbar-auth-controls button { margin-left: 10px; }
.danger-button { background-color: #dc3545; color: white; border-color: #dc3545; }

/* --- chat.html에서 가져온 스타일 --- */

.chat-message-item {
    display: flex;
    align-items: flex-start; /* 상단 정렬 */
    margin-bottom: 12px;
    line-height: 1.4;
}
.chat-profile-img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
    flex-shrink: 0; /* 이미지 크기 고정 */
}
.chat-message-content {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-width: 0;
}
.chat-message-header {
    margin-bottom: 4px;
}
.chat-author-name {
    font-weight: bold;
    margin-right: 8px;
}
.chat-timestamp {
    font-size: 0.8em;
    color: #888;
}
.chat-message-body p {
    margin: 0;
}
.chat-message-body img,
.chat-message-body video {
    max-width: 100%; /* 부모 요소의 너비를 넘지 않도록 설정 */
    max-height: 50vh; /* 화면 높이의 50%를 넘지 않도록 설정 */
    width: auto;   /* 너비는 비율에 맞게 자동 조절 */
    height: auto;  /* 높이도 비율에 맞게 자동 조절 */
    border-radius: 8px;
    margin-top: 5px;
    cursor: pointer;
    background-color: #f0f0f0;
}

/* 메시지 목록 */
.chat-message-list {
    flex: 1; /* 남은 공간을 모두 차지 */
    overflow-y: auto; /* 내용이 많아지면 스크롤 */
    padding: 10px;
    border-bottom: 1px solid #ccc;
}

.file-select-button {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    padding: 0 0;
    color: #555;
    /* 버튼이 다른 요소들과 세로 중앙에 오도록 정렬 */
    display: flex;
    align-items: center;
    justify-content: center;
}

.file-select-button:hover {
    color: #000;
}

/* 메시지 입력 폼 */
.chat-input-form {
    display: flex;
    align-items: flex-start; /* 아이템들을 위쪽 기준으로 정렬 */
    padding: 10px;
    border-top: 1px solid #ccc;
}

/* 자동 조절 텍스트 입력창 */
.chat-textarea {
    flex: 1; /* 남은 공간을 모두 차지 */
    margin: 0 10px;
    padding: 10px;
    font-size: 16px; /* 폰트 크기 키움 */
    font-family: inherit; /* 기본 폰트 상속 */
    border: 1px solid #ccc;
    border-radius: 8px;
    resize: none; /* 사용자가 크기 조절 못하게 막음 */
    overflow-y: hidden; /* 스크롤바 숨김 (높이가 자동으로 조절되므로) */
    min-height: 24px; /* 최소 높이 */
    max-height: 120px; /* 최대 높이 (예: 5줄 분량) */
    line-height: 1.5;
    box-sizing: border-box;
}

/* 전송 버튼 */
.send-button {
    display: flex;
    align-items: center;
    justify-content: center;

    width: 44px;
    height: 44px;
    padding: 0;
    border: none;
    background-color: #007bff; /* 이미 파란색입니다. 원하면 다른 색으로 변경하세요. */
    color: white;

    /* ✅ 이 값을 50%로 변경하여 원형으로 만듭니다. */
    border-radius: 50%;

    cursor: pointer;
    font-size: 20px;
}

.send-button:hover {
    background-color: #0056b3;
}

/* --- 링크 미리보기 카드 스타일 --- */
.link-preview-card {
    border: 1px solid #e1e8ed;
    border-radius: 8px;
    margin-top: 8px;
    overflow: hidden;
    max-width: 100%; /* 부모 너비에 맞춤 */
    text-decoration: none;
    color: inherit;
    display: block;
}
.link-preview-card:hover {
    background-color: #f5f8fa;
}
.link-preview-image {
    width: 100%;
    height: auto;
    max-height: 300px; /* 미리보기 이미지 최대 높이 제한 */
    object-fit: cover; /* 이미지가 영역을 채우도록, 비율 유지하며 잘라냄 */
    border-bottom: 1px solid #e1e8ed;
    background-color: #f0f0f0;
}
.link-preview-info {
    padding: 12px;
}
.link-preview-title {
    font-weight: bold;
    font-size: 15px;
    margin-bottom: 4px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
.link-preview-description {
    font-size: 14px;
    color: #657786;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
.link-preview-url {
    font-size: 12px;
    color: #8899a6;
    margin-top: 8px;
}

/* --- 링크 미리보기 카드 스타일 --- */
.link-preview-card {
    border: 1px solid #e1e8ed;
    border-radius: 8px;
    margin-top: 8px;
    overflow: hidden;
    max-width: 350px;
    text-decoration: none;
    color: inherit;
    display: block;
}
.link-preview-card:hover {
    background-color: #f5f8fa;
}
.link-preview-image {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-bottom: 1px solid #e1e8ed;
}
.link-preview-info {
    padding: 12px;
}
.link-preview-title {
    font-weight: bold;
    font-size: 15px;
    margin-bottom: 4px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
.link-preview-description {
    font-size: 14px;
    color: #657786;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
.link-preview-url {
    font-size: 12px;
    color: #8899a6;
    margin-top: 8px;
}

.file-preview-container {
    border-top: 1px solid #ccc;
    padding: 10px;
    background-color: #f9f9f9;
}

.file-preview-list {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
    overflow-x: auto;
}

.file-preview-item {
    flex-shrink: 0;
    display: flex;
    /* ✅ 아이템 내부 요소들을 세로로 정렬합니다. */
    flex-direction: column;
    align-items: center;
    gap: 5px; /* 썸네일과 파일명 사이의 간격입니다. */
    padding: 5px;
    font-size: 12px;
    color: #333;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    width: 90px; /* 아이템의 너비를 고정합니다. */
}

.image-preview-thumbnail {
    width: 60px;
    height: 60px;
    border-radius: 4px;
    /* ✅ cover -> contain 으로 변경하여 이미지가 잘리지 않게 합니다. */
    object-fit: contain;
    background-color: #e9e9e9;
}

.file-preview-container {
    display: flex; /* ✅ Flexbox 레이아웃 시작 */
    justify-content: space-between; /* ✅ 자식 요소들을 양쪽 끝으로 분산 */
    align-items: center; /* ✅ 세로 중앙 정렬 */
    border-top: 1px solid #ccc;
    padding: 10px;
    background-color: #f9f9f9;
}

.file-preview-list {
    display: flex;
    gap: 10px;
    overflow-x: auto; /* 가로 스크롤 */
    flex-grow: 1; /* ✅ 남는 공간을 모두 차지 (버튼을 오른쪽으로 밀어냄) */
    padding: 5px 0; /* 위아래 약간의 패딩 */
}

.file-preview-item {
    position: relative; /* ✅ 삭제 버튼의 위치 기준점 */
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    padding: 5px;
    font-size: 12px;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    width: 90px;
}

.image-preview-thumbnail {
    width: 60px;
    height: 60px;
    border-radius: 4px;
    object-fit: contain;
}

.file-preview-name {
    width: 100%;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ✅ 개별 파일 삭제 버튼 스타일 추가 */
.remove-file-btn {
    position: absolute; /* 부모(.file-preview-item) 기준 절대 위치 */
    top: -5px;
    right: -5px;
    width: 20px;
    height: 20px;
    border-radius: 50%; /* 원형 버튼 */
    border: 1px solid #ccc;
    background-color: white;
    color: #555;
    font-size: 14px;
    font-weight: bold;
    line-height: 18px;
    text-align: center;
    cursor: pointer;
    padding: 0;
}

.remove-file-btn:hover {
    background-color: #f5f5f5;
    color: black;
}

.file-preview-actions {
    display: flex; /* Flexbox 레이아웃 사용 */
    flex-direction: column; /* ✅ 아이템을 세로로 쌓도록 설정 */
    gap: 5px; /* ✅ 버튼 사이의 세로 간격 */
    flex-shrink: 0;
    padding-left: 15px;
}

.file-preview-actions button {
    /* 기존의 margin-left를 제거하거나 0으로 설정합니다. */
    margin-left: 0;
    padding: 5px 10px;
}

.nickname-editor {
    flex-shrink: 0;
    margin-top: auto; /* 다른 요소들을 위로 밀고 자신은 맨 아래에 위치 */
    padding-top: 10px;
}

.nickname-editor hr {
    border: none;
    border-top: 1px solid #eee;
}

.nickname-editor p {
    margin: 10px 0 5px;
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

.nickname-editor input {
    width: 100%;
    padding: 8px;
    box-sizing: border-box; /* 패딩을 너비에 포함 */
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 14px;
}

[data-id="user-list-panel"] {
    overflow-x: hidden; /* 가로 스크롤바 숨김 */

    padding: 24px; /* 상하좌우에 24px의 안쪽 여백을 줍니다. */
    box-sizing: border-box; /* 패딩을 추가해도 전체 크기가 늘어나지 않도록 보장합니다. */
}

[data-id="user-list-panel"] h4 {
    margin-top: 0; /* 선과 '참가자' 텍스트 사이의 간격 */
    margin-bottom: 10px; /* '참가자' 텍스트와 실제 목록 사이의 간격 */
    font-size: 1em;
}

.panel-title {
    padding-bottom: 10px; /* 제목 텍스트와 선 사이의 간격 */
    border-bottom: 2px solid #000; /* 연한 회색의 1px 실선 */
    color: #333;
}

.user-list-panel {
    width: 220px;
    border-right: 1px solid #eee;
    padding: 10px;

    /* ✅ 1. 이 패널을 세로 Flexbox 컨테이너로 설정합니다. */
    display: flex;
    flex-direction: column;
}

/* ✅ 2. 사용자 목록(ul)이 남는 공간을 모두 차지하도록 설정합니다. */
.user-list-scrollable {
    flex-grow: 1; /* 남는 세로 공간을 모두 차지 */
    overflow-y: auto; /* 목록이 길어지면 이 영역만 스크롤 */
    list-style: none;
    padding: 0;
    margin: 0;
}

.user-list-item {
    display: flex;
    align-items: center;
    padding: 2px 5px;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.user-list-item:hover {
    background-color: #f0f0f0;
}

.user-list-profile-img {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    margin-right: 10px;
    object-fit: cover;
    background-color: #eee;
}

.user-list-nickname {
    color: black;
    font-weight: normal;
}

/* 현재 사용자(나)를 위한 스타일 */
.user-list-item.me .user-list-nickname {
    color: #007bff;
    font-weight: bold;
}

/* 접속이 끊긴 사용자를 위한 스타일 */
.user-list-item.disconnected {
    opacity: 0.6;
}

/* --- 채팅 페이지 레이아웃 --- */
.chat-page-container {
    display: flex; /* 자식인 .chat-main-flex-container가 높이를 100% 차지하도록 */
    height: 100%;
    width: 100%;
    background-color: #fff;
    border-radius: 8px; /* (선택 사항) */
    box-shadow: 0 1px 3px rgba(0,0,0,0.1); /* (선택 사항) */
}

[data-id="chat-main-flex-container"] {
    display: flex;
    flex-direction: row;
    flex: 1;
    min-width: 0;
}

.chat-panel {
    flex: 1;
    display: flex;
    min-width: 0;
}

/* --- 공용 모달 스타일 --- */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    position: relative;
    background-color: white;
    padding: 30px 40px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    width: 300px;
}

.modal-close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 28px;
    color: #aaa;
    cursor: pointer;
}

.modal-close-btn:hover {
    color: #333;
}

.modal-content h2 {
    text-align: center;
    margin-top: 0;
    margin-bottom: 25px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
    color: #555;
}

.form-group input {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.modal-submit-btn {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 4px;
    background-color: #007bff;
    color: white;
    font-size: 16px;
    cursor: pointer;
    margin-top: 10px;
}

.modal-submit-btn:hover {
    background-color: #0056b3;
}

.profile-image-area {
    text-align: center;
    margin-bottom: 20px;
}

.profile-image-preview {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #eee;
    margin-bottom: 10px;
}

.profile-image-label {
    cursor: pointer;
    color: #007bff;
    font-weight: bold;
}

.profile-image-label:hover {
    text-decoration: underline;
}

/* form-group 내 textarea 스타일 (선택사항) */
.form-group textarea {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
    border: 1px solid #ccc;
    border-radius: 4px;
    resize: vertical; /* 세로 크기 조절만 가능하도록 */
    min-height: 80px;
}

/* --- 로비 페이지 스타일 --- */
.lobby-container {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}
.lobby-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}
.create-room-btn {
    padding: 10px 15px;
    border: none;
    background-color: #007bff;
    color: white;
    border-radius: 5px;
    cursor: pointer;
}

/* room-list 섹션 사이의 간격을 줍니다. */
.room-list {
    margin-bottom: 30px;
}

.room-list ul {
    list-style: none;
    padding: 0;
}
.room-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: background-color 0.2s, box-shadow 0.2s;
}
.room-list-item:hover {
    background-color: #f8f9fa;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
/* '내 채팅방' 아이템에 특별한 스타일을 부여 (예: 왼쪽 테두리) */
.room-list-item.my-room {
    border-left: 4px solid #007bff;
}

.room-info {
    display: flex;
    flex-direction: column;
}
.room-name {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 5px;
}
.lock-icon {
    margin-right: 8px;
}
.room-owner {
    font-size: 0.9em;
    color: #666;
}
.room-meta {
    display: flex;
    align-items: center;
    gap: 15px;
}
.room-count {
    font-size: 1em;
    font-weight: bold;
}
.enter-btn {
    padding: 8px 12px;
    border: 1px solid #ccc;
    background-color: #fff;
    border-radius: 5px;
}
.no-rooms {
    color: #888;
    padding: 20px;
    text-align: center;
}

/* --- 방 생성 모달 라디오 버튼 스타일 --- */
.radio-group {
    display: flex;
    gap: 20px;
}

/* Topbar 스타일 개선 */
.topbar {
    display: flex;
    flex-direction: column; /* ✅ 자식들을 세로로 쌓음 (상단 영역 -> 하단 탭 영역) */
    background-color: #fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1); /* 입체감을 위한 그림자 */
    flex-shrink: 0;
}
/* 상단 영역 (로고 + 인증 버튼) */
.topbar-main {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
}
.topbar-logo {
    margin: 0;
}
.topbar-logo, .topbar-logo:hover {
    color: #333;
    text-decoration: none;
}


/* 룸 탭 컨테이너 */
.room-tabs {
    display: flex;
    gap: 5px;
    /* Topbar의 남는 공간을 차지하여 중앙에 위치하도록 */
    flex-grow: 1;
    justify-content: center;
    padding: 0 20px;
}
/* 하단 탭 영역 컨테이너 */
.room-tabs-container {
    display: flex;
    padding: 0 10px; /* 좌우 여백 */
    border-top: 1px solid #eee; /* 상단 영역과의 구분선 */
}
/* 개별 룸 탭 버튼 */
.room-tab {
    padding: 10px 15px;
    border: none;
    background-color: transparent; /* 배경 없음 */
    cursor: pointer;
    font-size: 15px;
    color: #555;
    border-bottom: 3px solid transparent; /* 비활성 탭 하단선 (투명) */
}
.room-tab:hover {
    background-color: #f8f9fa;
}
/* 활성화된 탭 스타일 */
.room-tab.active {
    color: #007bff;
    font-weight: bold;
    border-bottom: 3px solid #007bff; /* 활성 탭 하단선 (파란색) */
}

/* 오른쪽 채팅 패널 (메시지 목록 + 입력창) */
.chat-panel {
    flex: 1; /* 가로로 남는 공간을 모두 차지 */
    display: flex;
    flex-direction: column; /* ✅ 자식들을 세로로 쌓음 (가장 중요!) */
    min-width: 0;
}

/* 메시지 목록 */
.chat-message-list {
    flex: 1; /* ✅ 세로로 남는 공간을 모두 차지 (입력창을 맨 아래로 밀어냄) */
    overflow-y: auto;
    padding: 10px;
}

.chat-page-container.dragging {
    /* 드래그 중일 때 점선 테두리 표시 */
    outline: 2px dashed #007bff;
    outline-offset: -10px;
    background-color: #f0f8ff; /* 연한 파란색 배경 */
}

/* 드래그 중일 때 나타날 메시지를 위한 가상 요소 */
.chat-page-container.dragging::before {
    content: "여기에 파일을 드롭하여 업로드하세요";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(255, 255, 255, 0.9);
    padding: 20px 40px;
    border-radius: 8px;
    font-size: 1.2em;
    font-weight: bold;
    color: #007bff;
    pointer-events: none; /* 이 메시지가 마우스 이벤트를 방해하지 않도록 설정 */
}